<p align="center">
  <img src="./assets/Rhubarb@0.5x.png" alt="Rhubarb" width="400"/>
</p>


[![Amazon Bedrock](https://img.shields.io/badge/Amazon%20Bedrock-8A2BE2?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI3OXB4IiBoZWlnaHQ9Ijc5cHgiIHZpZXdCb3g9Ii0wLjUgLTAuNSA3OSA3OSI%2BPGRlZnMvPjxnPjxnPjxwYXRoIGQ9Ik0gMCAwIEwgNzggMCBMIDc4IDc4IEwgMCA3OCBaIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDY1LjcyIDM3LjkxIEMgNjQuNSAzNy45MSA2My41IDM2LjkxIDYzLjUgMzUuNjggQyA2My41IDM0LjQ1IDY0LjUgMzMuNDUgNjUuNzIgMzMuNDUgQyA2Ni45NSAzMy40NSA2Ny45NSAzNC40NSA2Ny45NSAzNS42OCBDIDY3Ljk1IDM2LjkxIDY2Ljk1IDM3LjkxIDY1LjcyIDM3LjkxIFogTSAzMC4yMiA2Ny44NyBMIDI2LjYgNjUuNzYgTCAzNC4wMiA2MS4xMiBMIDMyLjg0IDU5LjIzIEwgMjQuNDMgNjQuNDkgTCAxNy44NCA2MC42NSBMIDE3Ljg0IDUwLjc1IEwgMjQuMDMgNDYuNjMgTCAyMi43OSA0NC43OCBMIDE2LjY4IDQ4Ljg1IEwgMTAuMDUgNDUuMDYgTCAxMC4wNSAzOS42NyBMIDE3LjI4IDM1LjUzIEwgMTYuMTggMzMuNiBMIDEwLjA1IDM3LjEgTCAxMC4wNSAzMi45OSBMIDE2LjczIDI5LjE3IEwgMjMuNDEgMzIuOTkgTCAyMy40MSAzNy4yOCBMIDE4LjM4IDQwLjI5IEwgMTkuNTMgNDIuMiBMIDI0LjUyIDM5LjIxIEwgMjkuNTIgNDIuMiBMIDMwLjY3IDQwLjI5IEwgMjUuNjQgMzcuMjggTCAyNS42NCAzMi45NCBMIDMxLjgyIDI4LjgxIEMgMzIuMTMgMjguNjEgMzIuMzIgMjguMjYgMzIuMzIgMjcuODkgTCAzMi4zMiAyMC4wOSBMIDMwLjA5IDIwLjA5IEwgMzAuMDkgMjcuMjkgTCAyNC40OCAzMS4wMyBMIDE3Ljg0IDI3LjI0IEwgMTcuODQgMTcuMzkgTCAyMy40MSAxNC4xNCBMIDIzLjQxIDIzLjQzIEwgMjUuNjQgMjMuNDMgTCAyNS42NCAxMi44NCBMIDMwLjIyIDEwLjE3IEwgMzkgMTMuMSBMIDM5IDQ1LjA3IEwgMjIuODQgNTQuNzcgTCAyMy45OCA1Ni42OCBMIDM5IDQ3LjY3IEwgMzkgNjQuOTQgWiBNIDYzLjUgNTAuMTYgQyA2My41IDUxLjM5IDYyLjUgNTIuMzggNjEuMjcgNTIuMzggQyA2MC4wNCA1Mi4zOCA1OS4wNCA1MS4zOSA1OS4wNCA1MC4xNiBDIDU5LjA0IDQ4LjkzIDYwLjA0IDQ3LjkzIDYxLjI3IDQ3LjkzIEMgNjIuNSA0Ny45MyA2My41IDQ4LjkzIDYzLjUgNTAuMTYgWiBNIDUyLjM2IDYxLjI5IEMgNTIuMzYgNjIuNTIgNTEuMzYgNjMuNTIgNTAuMTQgNjMuNTIgQyA0OC45MSA2My41MiA0Ny45MSA2Mi41MiA0Ny45MSA2MS4yOSBDIDQ3LjkxIDYwLjA2IDQ4LjkxIDU5LjA2IDUwLjE0IDU5LjA2IEMgNTEuMzYgNTkuMDYgNTIuMzYgNjAuMDYgNTIuMzYgNjEuMjkgWiBNIDUxLjI1IDE2Ljc1IEMgNTEuMjUgMTUuNTIgNTIuMjUgMTQuNTIgNTMuNDggMTQuNTIgQyA1NC43IDE0LjUyIDU1LjcgMTUuNTIgNTUuNyAxNi43NSBDIDU1LjcgMTcuOTggNTQuNyAxOC45OCA1My40OCAxOC45OCBDIDUyLjI1IDE4Ljk4IDUxLjI1IDE3Ljk4IDUxLjI1IDE2Ljc1IFogTSA2NS43MiAzMS4yMyBDIDYzLjY1IDMxLjIzIDYxLjkzIDMyLjY1IDYxLjQzIDM0LjU3IEwgNDEuMjMgMzQuNTcgTCA0MS4yMyAyOSBMIDUzLjQ4IDI5IEMgNTQuMDkgMjkgNTQuNTkgMjguNSA1NC41OSAyNy44OSBMIDU0LjU5IDIxLjA1IEMgNTYuNSAyMC41NSA1Ny45MyAxOC44MiA1Ny45MyAxNi43NSBDIDU3LjkzIDE0LjMgNTUuOTMgMTIuMyA1My40OCAxMi4zIEMgNTEuMDIgMTIuMyA0OS4wMiAxNC4zIDQ5LjAyIDE2Ljc1IEMgNDkuMDIgMTguODIgNTAuNDUgMjAuNTUgNTIuMzYgMjEuMDUgTCA1Mi4zNiAyNi43NyBMIDQxLjIzIDI2Ljc3IEwgNDEuMjMgMTIuMyBDIDQxLjIzIDExLjgyIDQwLjkyIDExLjM5IDQwLjQ3IDExLjI0IEwgMzAuNDQgNy45IEMgMzAuMTQgNy44IDI5LjgxIDcuODMgMjkuNTMgNy45OSBMIDE2LjE3IDE1Ljc5IEMgMTUuODMgMTUuOTkgMTUuNjIgMTYuMzYgMTUuNjIgMTYuNzUgTCAxNS42MiAyNy4yNCBMIDguMzggMzEuMzcgQyA4LjA0IDMxLjU3IDcuODIgMzEuOTQgNy44MiAzMi4zNCBMIDcuODIgNDUuNyBDIDcuODIgNDYuMSA4LjA0IDQ2LjQ3IDguMzggNDYuNjcgTCAxNS42MiA1MC44IEwgMTUuNjIgNjEuMjkgQyAxNS42MiA2MS42OSAxNS44MyA2Mi4wNSAxNi4xNyA2Mi4yNSBMIDI5LjUzIDcwLjA1IEMgMjkuNyA3MC4xNSAyOS45IDcwLjIgMzAuMDkgNzAuMiBDIDMwLjIxIDcwLjIgMzAuMzMgNzAuMTggMzAuNDQgNzAuMTQgTCA0MC40NyA2Ni44IEMgNDAuOTIgNjYuNjUgNDEuMjMgNjYuMjMgNDEuMjMgNjUuNzUgTCA0MS4yMyA1Mi4zOCBMIDQ5LjAyIDUyLjM4IEwgNDkuMDIgNTcgQyA0Ny4xMSA1Ny40OSA0NS42OCA1OS4yMiA0NS42OCA2MS4yOSBDIDQ1LjY4IDYzLjc1IDQ3LjY4IDY1Ljc1IDUwLjE0IDY1Ljc1IEMgNTIuNTkgNjUuNzUgNTQuNTkgNjMuNzUgNTQuNTkgNjEuMjkgQyA1NC41OSA1OS4yMiA1My4xNiA1Ny40OSA1MS4yNSA1NyBMIDUxLjI1IDUxLjI3IEMgNTEuMjUgNTAuNjYgNTAuNzUgNTAuMTYgNTAuMTQgNTAuMTYgTCA0MS4yMyA1MC4xNiBMIDQxLjIzIDQ0LjU5IEwgNTUuMTUgNDQuNTkgTCA1Ny41MyA0Ny43NiBDIDU3LjA4IDQ4LjQ2IDU2LjgyIDQ5LjI3IDU2LjgyIDUwLjE2IEMgNTYuODIgNTIuNjEgNTguODEgNTQuNjEgNjEuMjcgNTQuNjEgQyA2My43MyA1NC42MSA2NS43MiA1Mi42MSA2NS43MiA1MC4xNiBDIDY1LjcyIDQ3LjcgNjMuNzMgNDUuNyA2MS4yNyA0NS43IEMgNjAuNTEgNDUuNyA1OS44IDQ1LjkxIDU5LjE4IDQ2LjI1IEwgNTYuNTkgNDIuODEgQyA1Ni4zOCA0Mi41MyA1Ni4wNSA0Mi4zNiA1NS43IDQyLjM2IEwgNDEuMjMgNDIuMzYgTCA0MS4yMyAzNi43OSBMIDYxLjQzIDM2Ljc5IEMgNjEuOTMgMzguNzEgNjMuNjUgNDAuMTQgNjUuNzIgNDAuMTQgQyA2OC4xOCA0MC4xNCA3MC4xOCAzOC4xNCA3MC4xOCAzNS42OCBDIDcwLjE4IDMzLjIyIDY4LjE4IDMxLjIzIDY1LjcyIDMxLjIzIFoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjwvZz48L2c%2BPC9zdmc%2B)](https://aws.amazon.com/bedrock/)
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![made-with-python](https://img.shields.io/badge/Made%20with-Python-1f425f.svg)](https://www.python.org/)
[![Python 3.11](https://img.shields.io/badge/python-3.11-blue.svg)](https://www.python.org/downloads/release/python-311/)
[![Ruff](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json)](https://github.com/astral-sh/ruff)

<!-- [![PyPI pyversions](https://img.shields.io/pypi/pyversions/ansicolortags.svg)](https://pypi.python.org/pypi/ansicolortags/) -->

# Rhubarb

Rhubarb is a light-weight Python framework that makes it easy to build document understanding applications using Multi-modal Large Language Models (LLMs) and Embedding models. Rhubarb is created from the gorund up to work with Amazon Bedrock and Anthropic Claude Sonnet, Haiku, Opus, and Amazon Titan Embedding models.

## What can I do with Rhubarb?

Rhubarb can do multiple document processing tasks such as

- âœ… Document Q&A
- âœ… Streaming chat with documents (Q&A)
- âœ… Document Summarization
  - ðŸš€ Page level summaries
  - ðŸš€ Full summaries
  - ðŸš€ Summaries of specific pages
  - ðŸš€ Streaming Summaries
- âœ… Extraction based on a JSON schema
  - ðŸš€ Key-value extractions
  - ðŸš€ Table extractions
- âœ… Named entity recognition (NER) 
  - ðŸš€ With 50 built-in common entities
- âœ… PII recognition with built-in entities
- âœ… Figure and image understanding from documents
  - ðŸš€ Explain charts, graphs, and figures
  - ðŸš€ Perform table reasoning (as figures)
- âœ… Document Classification with vector sampling using multi-modal embedding models
- âœ… Auto generation of JSON schema from natural language prompts for document extraction
- âœ… Logs token usage to help keep track of costs

Rhubarb comes with built-in system prompts that makes it easy to use it for a number of different document understanding use-cases. You can customize Rhubarb by passing in your own system prompts. It supports exact JSON schema based output generation which makes it easy to integrate into downstream applications.

- Supports PDF, TIFF, PNG, JPG files
- Performs document to image conversion internally to work with the multi-modal models
- Works on local files or files stored in S3
- Supports specifying page numbers for multi-page documents
- Supports chat-history based chat for documents
- Supports streaming and non-streaming mode

## Installation

Start by installing Rhubarb using `pip`. Rhubarb is currently available in Test PyPi which you can install as follows

```
pip install --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple/ rhubarb_dev
```
<!-- 
 Once it is available in PyPi main index, you would be able to install normally. 

```
pip install rhubarb 
```
-->


### Usage

Create a `boto3` session.

```python
import boto3
session = boto3.Session()
```

#### Call Rhubarb

Local file

```python
from rhubarb import DocAnalysis

da = DocAnalysis(file_path="./path/to/doc/doc.pdf", 
                 boto3_session=session)
resp = da.run(message="What is the employee's name?")
resp
```

With file in Amazon S3

```python
from rhubarb import DocAnalysis

da = DocAnalysis(file_path="s3://path/to/doc/doc.pdf", 
                 boto3_session=session)
resp = da.run(message="What is the employee's name?")
resp
```

For more usage examples see [cookbooks](./cookbooks/).

## License

Apache License 2.0
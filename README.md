<p align="center">
  <img src="./assets/Rhubarb@0.5x.png" alt="Rhubarb" width="400"/>
</p>


[![Amazon Bedrock](https://img.shields.io/badge/Amazon%20Bedrock-8A2BE2?logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxODFweCIgaGVpZ2h0PSIxODFweCIgdmlld0JveD0iLTAuNSAtMC41IDE4MSAxODEiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7Ij48ZGVmcy8+PHJlY3QgZmlsbD0iI2ZmZmZmZiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgeD0iMCIgeT0iMCIvPjxnPjxnPjxwYXRoIGQ9Ik0gMCAwIEwgMTgwIDAgTCAxODAgMTgwIEwgMCAxODAgWiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHBhdGggZD0iTSAxNTEuNjcgODcuNDggQyAxNDguODQgODcuNDggMTQ2LjUzIDg1LjE4IDE0Ni41MyA4Mi4zNCBDIDE0Ni41MyA3OS41MSAxNDguODQgNzcuMiAxNTEuNjcgNzcuMiBDIDE1NC41MSA3Ny4yIDE1Ni44MSA3OS41MSAxNTYuODEgODIuMzQgQyAxNTYuODEgODUuMTggMTU0LjUxIDg3LjQ4IDE1MS42NyA4Ny40OCBaIE0gNjkuNzMgMTU2LjYyIEwgNjEuMzkgMTUxLjc2IEwgNzguNTEgMTQxLjA1IEwgNzUuNzkgMTM2LjY5IEwgNTYuMzcgMTQ4LjgzIEwgNDEuMTggMTM5Ljk3IEwgNDEuMTggMTE3LjEyIEwgNTUuNDUgMTA3LjYxIEwgNTIuNiAxMDMuMzMgTCAzOC41IDExMi43MyBMIDIzLjE5IDEwMy45OCBMIDIzLjE5IDkxLjU0IEwgMzkuODggODIgTCAzNy4zMyA3Ny41NCBMIDIzLjE5IDg1LjYyIEwgMjMuMTkgNzYuMTIgTCAzOC42MSA2Ny4zMSBMIDU0LjAzIDc2LjEyIEwgNTQuMDMgODYuMDMgTCA0Mi40MiA5Mi45OSBMIDQ1LjA3IDk3LjM5IEwgNTYuNTkgOTAuNDggTCA2OC4xMiA5Ny4zOSBMIDcwLjc3IDkyLjk5IEwgNTkuMTYgODYuMDMgTCA1OS4xNiA3Ni4wMSBMIDczLjQ0IDY2LjQ5IEMgNzQuMTUgNjYuMDEgNzQuNTggNjUuMjEgNzQuNTggNjQuMzUgTCA3NC41OCA0Ni4zNyBMIDY5LjQ0IDQ2LjM3IEwgNjkuNDQgNjIuOTggTCA1Ni40OSA3MS42MSBMIDQxLjE4IDYyLjg2IEwgNDEuMTggNDAuMTMgTCA1NC4wMyAzMi42NCBMIDU0LjAzIDU0LjA4IEwgNTkuMTYgNTQuMDggTCA1OS4xNiAyOS42NCBMIDY5LjczIDIzLjQ4IEwgOTAgMzAuMjMgTCA5MCAxMDQuMDEgTCA1Mi43IDEyNi4zOSBMIDU1LjM1IDEzMC44IEwgOTAgMTEwLjAxIEwgOTAgMTQ5Ljg3IFogTSAxNDYuNTMgMTE1Ljc1IEMgMTQ2LjUzIDExOC41OCAxNDQuMjMgMTIwLjg5IDE0MS4zOSAxMjAuODkgQyAxMzguNTYgMTIwLjg5IDEzNi4yNSAxMTguNTggMTM2LjI1IDExNS43NSBDIDEzNi4yNSAxMTIuOTEgMTM4LjU2IDExMC42MSAxNDEuMzkgMTEwLjYxIEMgMTQ0LjIzIDExMC42MSAxNDYuNTMgMTEyLjkxIDE0Ni41MyAxMTUuNzUgWiBNIDEyMC44NCAxNDEuNDQgQyAxMjAuODQgMTQ0LjI4IDExOC41MyAxNDYuNTggMTE1LjcgMTQ2LjU4IEMgMTEyLjg2IDE0Ni41OCAxMTAuNTYgMTQ0LjI4IDExMC41NiAxNDEuNDQgQyAxMTAuNTYgMTM4LjYxIDExMi44NiAxMzYuMyAxMTUuNyAxMzYuMyBDIDExOC41MyAxMzYuMyAxMjAuODQgMTM4LjYxIDEyMC44NCAxNDEuNDQgWiBNIDExOC4yNyAzOC42NiBDIDExOC4yNyAzNS44MiAxMjAuNTcgMzMuNTIgMTIzLjQxIDMzLjUyIEMgMTI2LjI0IDMzLjUyIDEyOC41NCAzNS44MiAxMjguNTQgMzguNjYgQyAxMjguNTQgNDEuNDkgMTI2LjI0IDQzLjggMTIzLjQxIDQzLjggQyAxMjAuNTcgNDMuOCAxMTguMjcgNDEuNDkgMTE4LjI3IDM4LjY2IFogTSAxNTEuNjcgNzIuMDYgQyAxNDYuODkgNzIuMDYgMTQyLjkxIDc1LjM1IDE0MS43NiA3OS43NyBMIDk1LjE0IDc5Ljc3IEwgOTUuMTQgNjYuOTIgTCAxMjMuNDEgNjYuOTIgQyAxMjQuODMgNjYuOTIgMTI1Ljk3IDY1Ljc3IDEyNS45NyA2NC4zNSBMIDEyNS45NyA0OC41NyBDIDEzMC4zOSA0Ny40MiAxMzMuNjggNDMuNDMgMTMzLjY4IDM4LjY2IEMgMTMzLjY4IDMyLjk5IDEyOS4wNyAyOC4zOCAxMjMuNDEgMjguMzggQyAxMTcuNzQgMjguMzggMTEzLjEzIDMyLjk5IDExMy4xMyAzOC42NiBDIDExMy4xMyA0My40MyAxMTYuNDIgNDcuNDIgMTIwLjg0IDQ4LjU3IEwgMTIwLjg0IDYxLjc4IEwgOTUuMTQgNjEuNzggTCA5NS4xNCAyOC4zOCBDIDk1LjE0IDI3LjI3IDk0LjQzIDI2LjI5IDkzLjM4IDI1Ljk0IEwgNzAuMjUgMTguMjMgQyA2OS41NSAxOCA2OC43OSAxOC4wOCA2OC4xNSAxOC40NSBMIDM3LjMxIDM2LjQ0IEMgMzYuNTIgMzYuOSAzNi4wNCAzNy43NSAzNi4wNCAzOC42NiBMIDM2LjA0IDYyLjg2IEwgMTkuMzUgNzIuNCBDIDE4LjU0IDcyLjg2IDE4LjA1IDczLjcxIDE4LjA1IDc0LjYzIEwgMTguMDUgMTA1LjQ3IEMgMTguMDUgMTA2LjM5IDE4LjU0IDEwNy4yNCAxOS4zNSAxMDcuNyBMIDM2LjA0IDExNy4yNCBMIDM2LjA0IDE0MS40NCBDIDM2LjA0IDE0Mi4zNiAzNi41MiAxNDMuMiAzNy4zMSAxNDMuNjYgTCA2OC4xNSAxNjEuNjUgQyA2OC41NCAxNjEuODggNjguOTkgMTYyIDY5LjQ0IDE2MiBDIDY5LjcyIDE2MiA2OS45OSAxNjEuOTYgNzAuMjUgMTYxLjg3IEwgOTMuMzggMTU0LjE2IEMgOTQuNDMgMTUzLjgxIDk1LjE0IDE1Mi44MyA5NS4xNCAxNTEuNzIgTCA5NS4xNCAxMjAuODkgTCAxMTMuMTMgMTIwLjg5IEwgMTEzLjEzIDEzMS41MyBDIDEwOC43MSAxMzIuNjggMTA1LjQyIDEzNi42NyAxMDUuNDIgMTQxLjQ0IEMgMTA1LjQyIDE0Ny4xMSAxMTAuMDMgMTUxLjcyIDExNS43IDE1MS43MiBDIDEyMS4zNyAxNTEuNzIgMTI1Ljk3IDE0Ny4xMSAxMjUuOTcgMTQxLjQ0IEMgMTI1Ljk3IDEzNi42NyAxMjIuNjkgMTMyLjY4IDExOC4yNyAxMzEuNTMgTCAxMTguMjcgMTE4LjMyIEMgMTE4LjI3IDExNi45IDExNy4xMiAxMTUuNzUgMTE1LjcgMTE1Ljc1IEwgOTUuMTQgMTE1Ljc1IEwgOTUuMTQgMTAyLjkgTCAxMjcuMjYgMTAyLjkgTCAxMzIuNzUgMTEwLjIyIEMgMTMxLjczIDExMS44MiAxMzEuMTEgMTEzLjcxIDEzMS4xMSAxMTUuNzUgQyAxMzEuMTEgMTIxLjQyIDEzNS43MiAxMjYuMDMgMTQxLjM5IDEyNi4wMyBDIDE0Ny4wNiAxMjYuMDMgMTUxLjY3IDEyMS40MiAxNTEuNjcgMTE1Ljc1IEMgMTUxLjY3IDExMC4wOCAxNDcuMDYgMTA1LjQ3IDE0MS4zOSAxMDUuNDcgQyAxMzkuNjQgMTA1LjQ3IDEzOC4wMSAxMDUuOTUgMTM2LjU2IDEwNi43MyBMIDEzMC42IDk4Ljc5IEMgMTMwLjExIDk4LjE0IDEyOS4zNSA5Ny43NiAxMjguNTQgOTcuNzYgTCA5NS4xNCA5Ny43NiBMIDk1LjE0IDg0LjkxIEwgMTQxLjc2IDg0LjkxIEMgMTQyLjkxIDg5LjMzIDE0Ni44OSA5Mi42MiAxNTEuNjcgOTIuNjIgQyAxNTcuMzQgOTIuNjIgMTYxLjk1IDg4LjAxIDE2MS45NSA4Mi4zNCBDIDE2MS45NSA3Ni42NyAxNTcuMzQgNzIuMDYgMTUxLjY3IDcyLjA2IFoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjwvZz48L2c+PC9zdmc+)](https://aws.amazon.com/bedrock/)
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![made-with-python](https://img.shields.io/badge/Made%20with-Python-1f425f.svg)](https://www.python.org/)
[![Python 3.11](https://img.shields.io/badge/python-3.11-blue.svg)](https://www.python.org/downloads/release/python-311/)
[![Ruff](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json)](https://github.com/astral-sh/ruff)

<!-- [![PyPI pyversions](https://img.shields.io/pypi/pyversions/ansicolortags.svg)](https://pypi.python.org/pypi/ansicolortags/) -->

# Rhubarb

Rhubarb is a light-weight Python framework that makes it easy to build document understanding applications using Multi-modal Large Language Models (LLMs) and Embedding models. Rhubarb is created from the gorund up to work with Amazon Bedrock and Anthropic Claude V3 Multi-modal Language Models, and Amazon Titan Multi-modal Embedding model.

## What can I do with Rhubarb?

Rhubarb can do multiple document processing tasks such as

- âœ… Document Q&A
- âœ… Streaming chat with documents (Q&A)
- âœ… Document Summarization
  - ðŸš€ Page level summaries
  - ðŸš€ Full summaries
  - ðŸš€ Summaries of specific pages
  - ðŸš€ Streaming Summaries
- âœ… Extraction based on a JSON schema
  - ðŸš€ Key-value extractions
  - ðŸš€ Table extractions
- âœ… Named entity recognition (NER) 
  - ðŸš€ With 50 built-in common entities
- âœ… PII recognition with built-in entities
- âœ… Figure and image understanding from documents
  - ðŸš€ Explain charts, graphs, and figures
  - ðŸš€ Perform table reasoning (as figures)
- âœ… Document Classification with vector sampling using multi-modal embedding models
- âœ… Auto generation of JSON schema from natural language prompts for document extraction
- âœ… Logs token usage to help keep track of costs

Rhubarb comes with built-in system prompts that makes it easy to use it for a number of different document understanding use-cases. You can customize Rhubarb by passing in your own system prompts. It supports exact JSON schema based output generation which makes it easy to integrate into downstream applications.

- Supports PDF, TIFF, PNG, JPG files
- Performs document to image conversion internally to work with the multi-modal models
- Works on local files or files stored in S3
- Supports specifying page numbers for multi-page documents
- Supports chat-history based chat for documents
- Supports streaming and non-streaming mode

## Installation

Start by installing Rhubarb using `pip`. Rhubarb is currently available in Test PyPi which you can install as follows

```
pip install --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple/ rhubarb_dev
```
<!-- 
 Once it is available in PyPi main index, you would be able to install normally. 

```
pip install rhubarb 
```
-->


### Usage

Create a `boto3` session.

```python
import boto3
session = boto3.Session()
```

#### Call Rhubarb

Local file

```python
from rhubarb import DocAnalysis

da = DocAnalysis(file_path="./path/to/doc/doc.pdf", 
                 boto3_session=session)
resp = da.run(message="What is the employee's name?")
resp
```

With file in Amazon S3

```python
from rhubarb import DocAnalysis

da = DocAnalysis(file_path="s3://path/to/doc/doc.pdf", 
                 boto3_session=session)
resp = da.run(message="What is the employee's name?")
resp
```

For more usage examples see [cookbooks](./cookbooks/).

## License

Apache License 2.0